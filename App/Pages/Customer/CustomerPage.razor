@page "/customer/all"

<h3>Alla kunder</h3>
<PageInfo Content="Både privata och företagskunder visas här. För att ta bort eller redigera en kund, klicka på den blå knappen i slutet på av raden." />

@if (Customers != null)
{
    <table class="table">
        <thead>
            <tr>
                <th>Förnamn</th>
                <th>Efternamn</th>
                <th>Address</th>
                <th>E-Post</th>
                <th>Timpris</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var customer in Customers)
            {
                <tr>
                    <td>@customer.FirstName</td>
                    <td>@customer.LastName</td>
                    <td>@customer.Address</td>
                    <td>@customer.Email</td>
                    <td>@(customer.HourlyFee == null ? "~" : customer.HourlyFee)</td>
                    <td><a class="btn btn-sm btn-primary" href="customer/edit/@customer.Id"><i class="oi oi-pencil"></i></a></td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <span>Hittade inga kunder.</span>
}
@code {
    [Inject] ICustomerService CustomerService { get; set; }
    protected CustomerInfo[] Customers;

    protected async override Task OnInitializedAsync()
    {
        var response = await CustomerService.GetAllCustomersAsync();
        if (response.Success)
            Customers = response.Entity.OrderBy(c => c.Registered).ToArray();
    }
}
